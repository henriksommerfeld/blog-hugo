<head>
    <meta charset="utf-8">
    <meta name="referrer" content="no-referrer">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    
    {{ if eq .Title .Site.Title }}
    <title>{{ .Title }}</title>
    <meta name="description" content="Henrik Sommerfeld's blog. Mostly about computer related stuff.">
    {{ else }}
    <title>{{ .Title }} | {{ .Site.Title }}</title>
    {{ end }}    

    <meta property="og:type" content="website" />
    <meta property="og:title" content="{{ .Title }}" />
    <meta property="og:url" content="{{ .Permalink }}" />
    <meta property="og:locale" content="en_GB" />

    {{ if .Description }}
    <meta property="og:description" content="{{ .Description }}" />
    {{ end }}
    {{ partial "meta-og-image.html" . }}

    <link rel="canonical" href="{{ .Permalink }}" />  

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@p4lm" />   

    {{ $sassOptions := (dict "outputStyle" "compressed" "enableSourceMap" true ) }}
    {{ $lightStyles := resources.Get "styles/light.scss" | toCSS $sassOptions | fingerprint "sha512" }}
    <script>
        // If `prefers-color-scheme` is not supported, fall back to light mode.
        // In this case, light.css will be downloaded with `highest` priority.
        if (window.matchMedia('(prefers-color-scheme: dark)').media === 'not all') {
          document.documentElement.style.display = 'none';
          document.head.insertAdjacentHTML(
              'beforeend',
              '<link data-theme="light" rel="stylesheet" type="text/css" href="{{ $lightStyles.RelPermalink }}" integrity="{{ $lightStyles.Data.Integrity }}"  onload="document.documentElement.style.display=\'\'">'
          );
        }
    </script>
    <!--
    Conditionally either load the light or the dark stylesheet. The matching file
    will be downloaded with `highest`, the non-matching file with `lowest`
    priority. If the browser doesn't support `prefers-color-scheme`, the media
    query is unknown and the files are downloaded with `lowest` priority (but
    above I already force `highest` priority for my default light experience).
    -->
    {{ $darkStyles := resources.Get "styles/dark.scss" | toCSS $sassOptions | fingerprint "sha512" }}
    <link data-theme="dark" rel="stylesheet" type="text/css" href="{{ $darkStyles.RelPermalink }}" integrity="{{ $darkStyles.Data.Integrity }}"  media="(prefers-color-scheme: dark)">
    <link data-theme="light" rel="stylesheet" type="text/css" href="{{ $lightStyles.RelPermalink }}" integrity="{{ $lightStyles.Data.Integrity }}"  media="(prefers-color-scheme: no-preference), (prefers-color-scheme: light)">
    
    {{ $mainStyles := resources.Get "styles/main-bundle.scss" | toCSS $sassOptions | fingerprint "sha512" }}
    <link rel="stylesheet" type="text/css" href="{{ $mainStyles.RelPermalink }}" integrity="{{ $mainStyles.Data.Integrity }}" media="screen, tv, projection">
    {{ $printStyles := resources.Get "styles/print-bundle.sass" | toCSS $sassOptions | fingerprint "sha512" }}
    <link rel="stylesheet" type="text/css" href="{{ $printStyles.RelPermalink }}" integrity="{{ $printStyles.Data.Integrity }}" media="print">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#04396c">
    <meta name="theme-color" content="#ffffff">
    {{ hugo.Generator }}
    {{ if .Site.GoogleAnalytics }}
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', '{{ .Site.GoogleAnalytics }}', 'auto');
    ga('send', 'pageview');

    </script>
    {{ end }}

    {{- partial "theme.html" -}}
</head>